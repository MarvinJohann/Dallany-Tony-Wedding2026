<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invitaci√≥n Dallany & Tony</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&family=Great+Vibes&family=Montserrat:wght@200;300;400&family=Noto+Sans+Gurmukhi:wght@300;400&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
:root{--bg:#FDFAF8;--primary:#E8A0B4;--accent:#C8965A;--text:#3A2A2E;--light:#FAEEF2;--muted:#B08090;--serif:'Cormorant Garamond',serif;--sans:'Montserrat',sans-serif;--pa:'Noto Sans Gurmukhi',sans-serif;}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);color:var(--text);font-family:var(--sans);min-height:100vh;overflow-x:hidden;}

/* ENVELOPE */
#env-overlay{position:fixed;inset:0;z-index:9999;background:radial-gradient(ellipse at 50% 45%,#F0E8DC,#DDD3C4);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:28px;transition:opacity .6s ease;}
#env-overlay.gone{opacity:0;pointer-events:none;}
@keyframes eUp{from{opacity:0;transform:translateY(22px);}to{opacity:1;transform:none;}}
@keyframes flt{0%,100%{transform:translate(-50%,-58%)}50%{transform:translate(-50%,-64%)}}
@keyframes hpulse{0%,100%{opacity:.45}50%{opacity:1}}
@keyframes cardRise{from{transform:translateY(200%);}to{transform:translateY(12%);}}
#env-box{position:relative;width:320px;height:360px;animation:eUp .8s ease .3s both;flex-shrink:0;overflow:hidden;}
#env-card{position:absolute;top:0;left:5%;right:5%;height:78%;background:linear-gradient(160deg,#FDFAF8,#FAF3EE);border:1px solid rgba(200,155,80,.28);box-shadow:0 4px 28px rgba(0,0,0,.12);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;padding:28px 20px;text-align:center;transform:translateY(100%);z-index:1;}
#env-card::before{content:'';position:absolute;inset:6px;border:1px solid rgba(200,155,80,.18);pointer-events:none;}
.ec-orn{font-size:.62rem;letter-spacing:6px;color:#C8965A;}
.ec-names{font-family:'Great Vibes',cursive;font-size:2rem;color:#3A2A2E;line-height:1.15;}
.ec-line{width:38px;height:.5px;background:#C8965A;margin:2px auto;}
.ec-date{font-family:var(--serif);font-size:.78rem;letter-spacing:2px;color:#E8A0B4;}
.ec-loc{font-size:.5rem;letter-spacing:3px;text-transform:uppercase;color:rgba(58,42,46,.42);}
#env-env{position:absolute;bottom:0;left:0;right:0;height:52%;z-index:4;cursor:pointer;}
#env-bg{position:absolute;inset:0;background:linear-gradient(155deg,#F6F2EC,#EDE7DC);box-shadow:0 10px 40px rgba(0,0,0,.17);}
#env-bg::before{content:'';position:absolute;inset:0;pointer-events:none;background:linear-gradient(to right,rgba(0,0,0,.04),transparent 44%),linear-gradient(to left,rgba(0,0,0,.04),transparent 44%);}
.ev{position:absolute;bottom:0;left:0;right:0;height:50%;clip-path:polygon(0 100%,50% 0%,100% 100%);background:linear-gradient(to bottom,rgba(0,0,0,.01),rgba(0,0,0,.055));pointer-events:none;}
.evl{position:absolute;bottom:0;left:0;right:0;height:50%;clip-path:polygon(0 100%,50% 0%,100% 100%);border-top:1px solid rgba(200,165,90,.18);pointer-events:none;}
#env-flap{position:absolute;top:0;left:0;right:0;height:48%;background:linear-gradient(172deg,#EFE9E0,#E4DDD0);clip-path:polygon(0 0,100% 0,50% 100%);transform-origin:top center;transition:transform .85s cubic-bezier(.4,0,.2,1);z-index:4;}
#env-flap::after{content:'';position:absolute;inset:0;background:linear-gradient(172deg,rgba(255,255,255,.28),transparent 55%);clip-path:polygon(0 0,100% 0,50% 100%);pointer-events:none;}
#env-mono{position:absolute;top:50%;left:50%;transform:translate(-50%,-58%);z-index:5;pointer-events:none;animation:flt 3s ease-in-out 1.2s infinite;}
#env-hint{text-align:center;flex-shrink:0;animation:eUp .6s ease 1.1s both,hpulse 2.2s ease 2s infinite;}
#env-hint .h1{font-family:var(--serif);font-style:italic;font-size:1rem;color:rgba(60,42,20,.58);letter-spacing:2px;display:block;line-height:2.2;}
#env-hint .h2{font-size:.63rem;color:rgba(60,42,20,.36);letter-spacing:1.5px;display:block;line-height:1.8;}
#env-hint .hpa{font-family:var(--pa);}
#env-skip{position:absolute;bottom:14px;right:16px;background:none;border:none;font-size:.5rem;letter-spacing:3px;text-transform:uppercase;color:rgba(60,42,20,.25);cursor:pointer;font-family:var(--sans);}

/* TOP BAR */
.top-bar{position:fixed;top:0;left:0;right:0;z-index:100;display:flex;align-items:center;gap:10px;padding:0 14px;height:48px;background:rgba(253,250,248,.96);backdrop-filter:blur(12px);border-bottom:1px solid rgba(200,150,90,.18);}
.bar-left{display:flex;align-items:center;gap:8px;flex:1;min-width:0;}
.bar-right{display:flex;align-items:center;gap:6px;flex-shrink:0;}
.ham-btn{display:flex;flex-direction:column;justify-content:center;gap:5px;width:32px;height:32px;background:none;border:none;cursor:pointer;flex-shrink:0;padding:4px;}
.ham-btn span{display:block;height:1.8px;background:var(--accent);border-radius:2px;transition:all .3s;box-shadow:0 0 4px rgba(200,150,90,.3);}
.ham-btn.open span:nth-child(1){transform:translateY(6.5px) rotate(45deg);}
.ham-btn.open span:nth-child(2){opacity:0;transform:scaleX(0);}
.ham-btn.open span:nth-child(3){transform:translateY(-6.5px) rotate(-45deg);}
.bar-player{display:flex;align-items:center;gap:6px;}
.bar-vinyl{width:20px;height:20px;border-radius:50%;background:conic-gradient(#3A2A2E 0deg,#7a6a52 60deg,#3A2A2E 120deg,#7a6a52 180deg,#3A2A2E 240deg,#7a6a52 300deg,#3A2A2E 360deg);position:relative;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.bar-vinyl::after{content:'';width:6px;height:6px;border-radius:50%;background:var(--bg);position:absolute;}
@keyframes barSpin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
.bar-vinyl.playing{animation:barSpin 3s linear infinite;}
.bar-song-info{display:flex;flex-direction:column;min-width:0;}
.bar-song-title{font-family:var(--serif);font-size:.65rem;font-style:italic;color:var(--text);white-space:nowrap;max-width:90px;overflow:hidden;text-overflow:ellipsis;}
.bar-song-artist{font-size:.46rem;letter-spacing:2px;text-transform:uppercase;color:var(--accent);}
.bar-progress{width:44px;height:2px;background:var(--light);border-radius:99px;overflow:hidden;}
.bar-progress-bar{height:100%;background:var(--accent);width:0%;transition:width .5s linear;}
.bar-play-btn{width:26px;height:26px;border-radius:50%;background:var(--primary);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:background .2s,transform .2s;}
.bar-play-btn:hover{background:var(--accent);transform:scale(1.1);}
.bar-play-btn svg{width:11px;height:11px;fill:white;margin-left:2px;}
@media(max-width:480px){.bar-vinyl,.bar-progress{display:none !important;}.bar-player{gap:4px;}.bar-song-title{max-width:70px;}.bar-song-artist{max-width:70px;}.bar-play-btn{order:-1;}.bar-song-info{order:0;}}

/* Language dropdown */
.lang-icon-btn{background:none;border:1px solid rgba(200,150,90,.45);border-radius:99px;padding:4px 9px;cursor:pointer;font-size:.7rem;display:flex;align-items:center;gap:4px;color:var(--text);font-family:var(--sans);transition:background .2s;white-space:nowrap;}
.lang-icon-btn:hover{background:var(--light);}
.lang-icon-btn .lang-caret{font-size:.55rem;color:var(--accent);}
.lang-dropdown-wrap{position:relative;}
.lang-dropdown{display:none;position:absolute;top:calc(100% + 7px);right:0;background:white;border:1px solid rgba(200,150,90,.28);box-shadow:0 8px 28px rgba(60,30,40,.12);min-width:148px;z-index:200;border-radius:4px;overflow:hidden;}
.lang-dropdown.open{display:block;}
.lang-opt{display:flex;align-items:center;gap:9px;padding:10px 14px;font-size:.62rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--text);cursor:pointer;border:none;background:none;width:100%;font-family:var(--sans);font-weight:300;transition:background .18s;}
.lang-opt:hover,.lang-opt.active{background:var(--light);color:var(--primary);}
.lang-opt .lo-flag{font-size:.95rem;}
.lang-opt .lo-check{margin-left:auto;color:var(--primary);font-size:.8rem;opacity:0;}
.lang-opt.active .lo-check{opacity:1;}

/* NAV DRAWER */
#nav-drawer{position:fixed;top:48px;left:0;bottom:0;width:min(260px,80vw);background:rgba(253,250,248,.98);backdrop-filter:blur(18px);border-right:1px solid rgba(200,150,90,.18);z-index:99;transform:translateX(-100%);transition:transform .38s cubic-bezier(.4,0,.2,1);box-shadow:4px 0 32px rgba(60,30,40,.08);overflow-y:auto;}
#nav-drawer.open{transform:translateX(0);}
#nav-overlay{position:fixed;inset:0;top:48px;background:rgba(58,42,46,.18);z-index:98;opacity:0;pointer-events:none;transition:opacity .38s;}
#nav-overlay.open{opacity:1;pointer-events:all;}
.nav-inner{padding:28px 0 40px;}
.nav-couple{text-align:center;padding:0 20px 24px;border-bottom:1px solid rgba(200,150,90,.15);margin-bottom:8px;}
.nav-couple-name{font-family:'Great Vibes',cursive;font-size:1.55rem;color:var(--text);}
.nav-couple-date{font-size:.52rem;letter-spacing:3px;text-transform:uppercase;color:var(--accent);margin-top:3px;}
.nav-item{display:flex;align-items:center;gap:12px;padding:13px 22px;color:var(--text);font-size:.68rem;letter-spacing:2px;text-transform:uppercase;font-weight:300;cursor:pointer;transition:background .2s;border:none;background:none;width:100%;font-family:var(--sans);}
.nav-item:hover{background:var(--light);color:var(--primary);}
.nav-item .nav-icon{font-size:.95rem;width:22px;text-align:center;flex-shrink:0;filter:sepia(1) saturate(3) hue-rotate(295deg) brightness(1.3);}
.nav-sep{height:1px;background:rgba(200,150,90,.12);margin:6px 20px;}

/* DIVIDER */
.elegant-divider{display:flex;align-items:center;justify-content:center;padding:18px 20px;}
.elegant-divider svg{width:min(380px,88vw);}

/* HERO */
.hero{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:80px 20px 60px;position:relative;overflow:hidden;background:var(--bg);}
.hero-bg{position:absolute;inset:0;background-image:url('img/IMG_7517.jpeg');background-size:cover;background-position:center;z-index:0;}
.hero-bg::after{content:'';position:absolute;inset:0;background:linear-gradient(to bottom,rgba(253,250,248,.78),rgba(253,250,248,.62) 50%,rgba(253,250,248,.82));}
.hero>*{position:relative;z-index:1;}
.hero::before{content:'';position:absolute;top:58px;left:18px;width:54px;height:54px;border-top:1px solid rgba(200,150,90,.28);border-left:1px solid rgba(200,150,90,.28);z-index:1;}
.hero::after{content:'';position:absolute;top:58px;right:18px;width:54px;height:54px;border-top:1px solid rgba(200,150,90,.28);border-right:1px solid rgba(200,150,90,.28);z-index:1;}
.hero-corner-bl{position:absolute;bottom:38px;left:18px;width:54px;height:54px;border-bottom:1px solid rgba(200,150,90,.28);border-left:1px solid rgba(200,150,90,.28);z-index:1;}
.hero-corner-br{position:absolute;bottom:38px;right:18px;width:54px;height:54px;border-bottom:1px solid rgba(200,150,90,.28);border-right:1px solid rgba(200,150,90,.28);z-index:1;}
.monogram-wrap{margin-bottom:14px;}
.monogram-svg{width:clamp(170px,48vw,250px);height:clamp(130px,38vw,200px);}
@keyframes heartbeat{0%,100%{transform:scale(1);}14%{transform:scale(1.05);}28%{transform:scale(1);}42%{transform:scale(1.03);}70%{transform:scale(1);}}
@keyframes fadeLines{0%,100%{opacity:.45;}42%{opacity:.85;}}
.monogram-svg .heart-group{transform-origin:160px 130px;animation:heartbeat 2.8s ease-in-out infinite;}
.monogram-svg .inner-lines{animation:fadeLines 2.8s ease-in-out infinite;}

/* QUILL NAMES */
.hero-names-outer{position:relative;display:inline-block;max-width:92vw;}
.names-writing-layer{position:absolute;top:0;left:50%;transform:translateX(-50%);text-align:center;pointer-events:none;z-index:2;transition:opacity .6s cubic-bezier(.4,0,.2,1),transform .6s cubic-bezier(.4,0,.2,1);transform-origin:center top;}
.names-writing-layer.exit{opacity:0;transform:translateX(-50%) scale(.92) translateY(-14px);}
.names-wr-line{display:block;font-family:'Great Vibes',cursive;font-size:clamp(3.2rem,11vw,6.5rem);font-weight:400;line-height:1.2;color:var(--text);white-space:nowrap;}
.names-wr-line.amp-line{color:var(--accent);font-size:clamp(2.6rem,9vw,5.4rem);line-height:1.05;}
.hero-names-final{display:block;font-family:'Great Vibes',cursive;font-size:clamp(2.8rem,9vw,5.5rem);font-weight:400;line-height:1.2;color:var(--text);white-space:nowrap;opacity:0;transform:translateY(24px) scale(.95);transition:opacity .8s cubic-bezier(.2,1,.3,1),transform .8s cubic-bezier(.2,1,.3,1);}
.hero-names-final .amp{color:var(--accent);}
.hero-names-final.show{opacity:1;transform:translateY(0) scale(1);}
.wc{display:inline-block;padding:.18em .1em;margin:-.18em -.1em;clip-path:inset(0 103% 0 0 round 0px);transition:clip-path .19s ease-out;vertical-align:baseline;}
.wc.on{clip-path:inset(0 0% 0 0 round 0px);}
.wc-amp{color:var(--accent);}

/* Quill */
#quill{position:absolute;width:clamp(28px,4.5vw,44px);pointer-events:none;opacity:0;z-index:10;transform-origin:50% 90%;transform:rotate(30deg);transition:left .12s ease-out,top .12s ease-out,opacity .4s ease;will-change:left,top;}
@keyframes quillJitter{0%,100%{transform:rotate(30deg) translate(0,0);}25%{transform:rotate(31.5deg) translate(.5px,-1px);}50%{transform:rotate(29.5deg) translate(-.5px,.5px);}75%{transform:rotate(30.8deg) translate(.3px,-.5px);}}
#quill.writing{animation:quillJitter .16s ease-in-out infinite;}

/* Hero info & slideshow reveal */
.hero-info-wrap{overflow:hidden;max-height:0;opacity:0;transition:max-height .7s ease,opacity .6s ease,margin .5s ease;margin-top:0;}
.hero-info-wrap.show{max-height:120px;opacity:1;margin-top:16px;}
.side-lines{display:flex;align-items:center;gap:18px;margin:10px auto;width:min(320px,78%);}
.side-line{flex:1;height:.5px;background:var(--accent);opacity:.6;}
.side-diamond{width:5px;height:5px;background:var(--accent);transform:rotate(45deg);flex-shrink:0;}
.hero-date{font-family:var(--serif);font-size:clamp(.95rem,2.4vw,1.35rem);font-weight:300;letter-spacing:3px;color:var(--primary);}
.hero-location{font-size:.58rem;font-weight:200;letter-spacing:5px;text-transform:uppercase;color:var(--muted);margin-top:4px;}

/* SLIDESHOW ‚Äî fullscreen hero background */
.hero-slideshow{position:absolute;inset:0;z-index:0;opacity:0;transition:opacity 1s ease;}
.hero-slideshow.show{opacity:1;}
.ss-frame{position:absolute;inset:0;overflow:hidden;background:#2A1A1E;}
.ss-slide{position:absolute;inset:0;opacity:0;transition:opacity 1.2s ease;background:#2A1A1E;}
.ss-slide.active{opacity:1;}
.ss-slide img{width:100%;height:100%;object-fit:cover;display:block;}
.ss-slide .ss-ph{width:100%;height:100%;display:flex;align-items:center;justify-content:center;}
/* Gradient overlay on top of slides so text stays readable */
.ss-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,rgba(253,250,248,.70) 0%,rgba(253,250,248,.52) 45%,rgba(253,250,248,.72) 100%);z-index:1;pointer-events:none;}
.ss-arrows{display:flex;justify-content:space-between;position:absolute;bottom:24px;left:50%;transform:translateX(-50%);gap:12px;z-index:3;pointer-events:none;}
.ss-arrow{width:36px;height:36px;border-radius:50%;background:rgba(253,250,248,.7);border:1px solid rgba(200,150,90,.4);display:flex;align-items:center;justify-content:center;cursor:pointer;pointer-events:all;transition:background .2s,transform .2s;backdrop-filter:blur(8px);}
.ss-arrow:hover{background:var(--primary);transform:scale(1.1);}
.ss-arrow svg{width:14px;height:14px;fill:var(--text);}
.ss-arrow:hover svg{fill:white;}
.ss-dots{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);display:flex;gap:7px;z-index:3;}
.ss-dot{width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,.5);transition:background .3s,transform .3s;cursor:pointer;border:none;padding:0;}
.ss-dot.active{background:var(--accent);transform:scale(1.4);}

/* Top-bar heart ‚Äî centered */
.bar-heart{position:absolute;left:50%;transform:translateX(-50%);display:flex;align-items:center;justify-content:center;pointer-events:none;}
.bar-heart svg{width:36px;height:28px;}

/* SECTIONS */
.countdown-wrap{background:var(--primary);padding:46px 20px;text-align:center;position:relative;}
.countdown-wrap::before,.countdown-wrap::after{content:'';position:absolute;left:50%;transform:translateX(-50%);width:min(280px,58vw);height:1px;background:rgba(255,255,255,.2);}
.countdown-wrap::before{top:14px;}.countdown-wrap::after{bottom:14px;}
.section-label{font-size:.72rem;letter-spacing:5px;text-transform:uppercase;color:var(--accent);margin-bottom:18px;display:block;}
.countdown{display:flex;justify-content:center;gap:clamp(20px,5vw,56px);}
.countdown-unit{text-align:center;}
.countdown-num{font-family:var(--serif);font-size:clamp(3.5rem,10vw,5.5rem);font-weight:300;color:white;line-height:1;}
.countdown-label{font-size:.72rem;letter-spacing:4px;text-transform:uppercase;color:rgba(255,255,255,.75);margin-top:6px;}
.content-wrap{padding:56px 20px;text-align:center;max-width:720px;margin:0 auto;}
.section-title{font-family:var(--serif);font-size:clamp(2.2rem,5.5vw,3.2rem);font-weight:300;font-style:italic;color:var(--text);margin-bottom:16px;line-height:1.2;}
.section-body{font-weight:300;font-size:1rem;line-height:2;color:#6B4A58;letter-spacing:.3px;}
.section-photo-wrap{position:relative;width:clamp(155px,46vw,230px);margin:30px auto 0;}
.photo-effect-tilt .section-torn{clip-path:polygon(0% 5%,4% 0%,8% 3%,12% 0%,16% 4%,20% 0%,25% 3%,29% 0%,33% 4%,37% 0%,42% 3%,46% 0%,50% 4%,54% 0%,58% 3%,63% 0%,67% 4%,71% 0%,76% 3%,80% 0%,84% 4%,88% 0%,92% 3%,96% 0%,100% 5%,100% 94%,96% 98%,92% 95%,88% 99%,84% 96%,80% 100%,76% 97%,71% 100%,67% 96%,63% 100%,58% 97%,54% 100%,50% 96%,46% 100%,42% 96%,37% 99%,33% 95%,29% 99%,25% 96%,20% 100%,16% 97%,12% 100%,8% 96%,4% 99%,0% 94%);box-shadow:0 6px 24px rgba(60,30,40,.12);background:var(--light);transition:transform .4s;transform:rotate(-2deg);}
.photo-effect-tilt:hover .section-torn{transform:rotate(0) scale(1.03);}
.photo-effect-tilt .section-torn img,.photo-effect-tilt .section-torn .photo-ph{width:100%;height:clamp(175px,50vw,250px);object-fit:cover;display:flex;align-items:center;justify-content:center;background:var(--light);}
.photo-effect-tilt .section-torn img{display:block;}
.photo-effect-polaroid .section-torn{clip-path:none;background:white;padding:10px 10px 36px;box-shadow:0 8px 32px rgba(60,30,40,.12);transform:rotate(2deg);transition:transform .4s;}
.photo-effect-polaroid:hover .section-torn{transform:rotate(0) scale(1.03);}
.photo-effect-polaroid .section-torn img,.photo-effect-polaroid .section-torn .photo-ph{width:100%;height:clamp(155px,44vw,220px);object-fit:cover;display:flex;align-items:center;justify-content:center;background:var(--light);}
.photo-effect-polaroid .section-torn img{display:block;}
.photo-effect-glow .section-torn{clip-path:none;border-radius:2px;border:1px solid rgba(200,150,90,.35);transition:box-shadow .4s,transform .4s;}
.photo-effect-glow:hover .section-torn{box-shadow:0 0 20px 5px rgba(232,160,180,.3);transform:scale(1.03);}
.photo-effect-glow .section-torn img,.photo-effect-glow .section-torn .photo-ph{width:100%;height:clamp(175px,50vw,250px);display:flex;align-items:center;justify-content:center;background:var(--light);}
.photo-effect-glow .section-torn img{display:block;object-fit:cover;}
.photo-effect-film .section-torn{clip-path:none;background:#111;padding:7px 0;transition:transform .4s;}
.photo-effect-film:hover .section-torn{transform:scale(1.02);}
.photo-effect-film .section-torn::before,.photo-effect-film .section-torn::after{content:'';position:absolute;top:0;bottom:0;width:13px;background:repeating-linear-gradient(to bottom,#111 0,#111 6px,#FDFAF8 6px,#FDFAF8 11px);}
.photo-effect-film .section-torn::before{left:0;}.photo-effect-film .section-torn::after{right:0;}
.photo-effect-film .section-torn img{width:100%;height:clamp(175px,50vw,250px);object-fit:cover;display:block;filter:sepia(20%);transition:filter .4s;}
.photo-effect-film:hover .section-torn img{filter:none;}
.photo-effect-film .section-torn .photo-ph{width:100%;height:clamp(175px,50vw,250px);display:flex;align-items:center;justify-content:center;background:var(--light);}
.photo-effect-circle .section-torn{clip-path:circle(46% at 50% 50%);background:var(--light);transition:clip-path .5s;}
.photo-effect-circle:hover .section-torn{clip-path:circle(50% at 50% 50%);}
.photo-effect-circle .section-torn img{width:100%;height:clamp(175px,50vw,250px);object-fit:cover;display:block;transition:transform .5s;}
.photo-effect-circle:hover .section-torn img{transform:scale(1.07);}
.photo-effect-circle .section-torn .photo-ph{width:100%;height:clamp(175px,50vw,250px);display:flex;align-items:center;justify-content:center;background:var(--light);}
.events-wrap{background:var(--light);padding:56px 20px;}
.events-inner{max-width:860px;margin:0 auto;display:grid;grid-template-columns:1fr 1px 1fr 1px 1fr;gap:24px;align-items:start;text-align:center;}
@media(max-width:660px){.events-inner{grid-template-columns:1fr;gap:32px;}.vline{display:none;}}
.vline{background:rgba(200,150,90,.3);height:90px;align-self:center;}
.event-icon{font-size:1.4rem;margin-bottom:8px;}
.event-type{font-size:.58rem;letter-spacing:4px;text-transform:uppercase;color:var(--accent);margin-bottom:5px;}
.event-date{font-family:var(--serif);font-size:.88rem;font-style:italic;color:var(--primary);margin-bottom:2px;}
.event-time{font-family:var(--serif);font-size:1.55rem;font-weight:300;font-style:italic;color:var(--primary);margin-bottom:4px;}
.event-place{font-size:.7rem;font-weight:300;color:var(--muted);line-height:1.7;}
.map-btn{display:inline-block;margin-top:9px;padding:6px 18px;border:1px solid rgba(200,150,90,.45);color:var(--text);font-size:.58rem;letter-spacing:3px;text-transform:uppercase;text-decoration:none;font-weight:300;transition:all .3s;}
.map-btn:hover{background:var(--primary);color:white;border-color:var(--primary);}
.cal-wrap{position:relative;display:inline-block;margin-top:8px;}
.cal-btn{background:none;border:none;cursor:pointer;font-size:.56rem;letter-spacing:2px;text-transform:uppercase;color:var(--accent);font-family:var(--sans);font-weight:300;padding:4px 6px;transition:color .2s;}
.cal-btn:hover{color:var(--primary);}
.cal-dropdown{display:none;position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:white;border:1px solid rgba(200,150,90,.3);box-shadow:0 8px 28px rgba(60,30,40,.12);min-width:190px;z-index:50;}
.cal-dropdown.open{display:block;}
.cal-opt{display:flex;align-items:center;gap:8px;padding:10px 14px;font-size:.64rem;color:var(--text);cursor:pointer;transition:background .2s;white-space:nowrap;background:none;border:none;width:100%;font-family:var(--sans);font-weight:300;}
.cal-opt:hover{background:var(--light);}
.dresscode-wrap{padding:56px 20px;text-align:center;background:var(--bg);}
.dress-figures{display:flex;justify-content:center;gap:clamp(28px,9vw,72px);margin:24px auto 6px;align-items:flex-start;}
.dress-figure{display:flex;flex-direction:column;align-items:center;gap:7px;flex:1;max-width:155px;}
.dress-label{font-size:.58rem;letter-spacing:3px;text-transform:uppercase;color:var(--accent);}
.dress-desc{font-weight:300;font-size:.76rem;line-height:1.9;color:var(--muted);text-align:center;}
.figure-svg{width:clamp(62px,15vw,84px);}
.palette{display:flex;justify-content:center;gap:9px;margin-top:18px;flex-wrap:wrap;}
.swatch{width:42px;height:42px;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,.1);transition:transform .3s;}
.swatch:hover{transform:scale(1.15);}
.song-wrap{background:var(--light);padding:56px 20px;text-align:center;}
.gifts-wrap{background:var(--bg);padding:56px 20px;text-align:center;}
.gifts-grid{display:flex;flex-wrap:wrap;justify-content:center;gap:16px;margin-top:24px;}
.gift-card{background:white;border:1px solid rgba(200,150,90,.28);padding:22px 26px;min-width:160px;max-width:220px;display:flex;flex-direction:column;align-items:center;gap:10px;text-decoration:none;transition:transform .25s,box-shadow .25s;box-shadow:0 2px 12px rgba(60,30,40,.05);}
.gift-card:hover{transform:translateY(-4px);box-shadow:0 10px 28px rgba(60,30,40,.1);}
.gift-cta{font-size:.58rem;letter-spacing:3px;text-transform:uppercase;color:var(--accent);}
.qr-wrap{background:var(--light);padding:56px 20px;text-align:center;}
#qr-canvas{margin:24px auto 0;display:inline-block;padding:12px;background:white;box-shadow:0 4px 24px rgba(60,30,40,.1);border:1px solid rgba(200,150,90,.2);}
.qr-sub{font-size:.6rem;letter-spacing:2px;color:var(--muted);margin-top:14px;}
.qr-btn{display:inline-block;margin-top:14px;padding:9px 24px;border:1px solid rgba(200,150,90,.45);color:var(--text);font-size:.6rem;letter-spacing:3px;text-transform:uppercase;cursor:pointer;background:none;font-family:var(--sans);transition:all .3s;}
.qr-btn:hover{background:var(--primary);color:white;border-color:var(--primary);}
.rsvp-wrap{background:var(--primary);color:white;padding:68px 20px;text-align:center;position:relative;}
.rsvp-wrap::before,.rsvp-wrap::after{content:'';position:absolute;left:50%;transform:translateX(-50%);width:min(260px,58vw);height:1px;background:rgba(255,255,255,.12);}
.rsvp-wrap::before{top:18px;}.rsvp-wrap::after{bottom:18px;}
.rsvp-title{font-family:var(--serif);font-size:clamp(2rem,5vw,3rem);font-weight:300;font-style:italic;color:white;margin-bottom:12px;}
.rsvp-body{font-size:.8rem;font-weight:300;color:rgba(255,255,255,.55);line-height:1.9;}
.rsvp-btn{display:inline-block;margin-top:26px;padding:12px 42px;border:1px solid rgba(255,255,255,.35);color:white;font-size:.62rem;font-weight:200;letter-spacing:5px;text-transform:uppercase;text-decoration:none;transition:all .35s;background:transparent;}
.rsvp-btn:hover{background:rgba(255,255,255,.12);}
footer{background:var(--text);color:rgba(255,255,255,.28);text-align:center;padding:22px 20px;font-size:.58rem;letter-spacing:4px;text-transform:uppercase;}
.fade{opacity:0;transform:translateY(18px);transition:opacity .9s,transform .9s;}
.fade.visible{opacity:1;transform:none;}
body.lang-pa .section-label,body.lang-pa .section-title,body.lang-pa .section-body,body.lang-pa .event-type,body.lang-pa .event-place,body.lang-pa .countdown-label,body.lang-pa .hero-location,body.lang-pa .map-btn,body.lang-pa .rsvp-btn,body.lang-pa .gift-cta,body.lang-pa footer,body.lang-pa .cal-btn,body.lang-pa .cal-opt,body.lang-pa .nav-item{font-family:var(--pa);letter-spacing:0;}
</style>
</head>
<body class="lang-es">

<!-- ENVELOPE -->
<div id="env-overlay">
  <div id="env-box">
    <div id="env-card">
      <div class="ec-orn">‚ú¶ &nbsp; ‚ú¶ &nbsp; ‚ú¶</div>
      <div class="ec-names" id="ec-names">Dallany &amp; Tony</div>
      <div class="ec-line"></div>
      <div class="ec-date" id="ec-date">Viernes ¬∑ 3 de Julio ¬∑ 2026</div>
      <div class="ec-loc">Chihuahua, M√©xico</div>
    </div>
    <div id="env-env" onclick="openEnvelope()" style="position:absolute;bottom:0;left:0;right:0;height:52%;z-index:4;cursor:pointer;">
      <div id="env-bg"><div class="ev"></div><div class="evl"></div></div>
      <div id="env-flap"></div>
      <div id="env-mono"><span style="font-family:'Great Vibes',cursive;font-size:38px;background:linear-gradient(135deg,#F8E878,#D4A040 25%,#F2CC58 50%,#B87820 75%,#ECC050);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;display:block;line-height:1.1;letter-spacing:3px;filter:drop-shadow(0 2px 5px rgba(160,100,0,.35));">D &amp; T</span></div>
    </div>
  </div>
  <div id="env-hint">
    <span class="h1">‚úâ &nbsp; Toca para abrir</span>
    <span class="h2">Tap to open <span style="margin:0 6px;opacity:.4">¬∑</span><span class="hpa">‡®ñ‡©ã‡®≤‡©ç‡®π‡®£ ‡®≤‡®à ‡®õ‡©Ç‡®π‡©ã</span></span>
  </div>
  <button id="env-skip" onclick="event.stopPropagation();closeEnvelope()">Saltar ‚Üí</button>
</div>

<!-- NAV -->
<div id="nav-overlay" onclick="closeNav()"></div>
<div id="nav-drawer">
  <div class="nav-inner">
    <div class="nav-couple"><div class="nav-couple-name">Dallany &amp; Tony</div><div class="nav-couple-date">3 ¬∑ VII ¬∑ 2026</div></div>
    <button class="nav-item" onclick="navTo('section-hero')"><span class="nav-icon">üè†</span><span data-i18n="nav_home"></span></button>
    <button class="nav-item" onclick="navTo('section-message')"><span class="nav-icon">üíå</span><span data-i18n="nav_message"></span></button>
    <button class="nav-item" onclick="navTo('section-events')"><span class="nav-icon">üìÖ</span><span data-i18n="nav_dates"></span></button>
    <div class="nav-sep"></div>
    <button class="nav-item" onclick="navTo('section-dresscode')"><span class="nav-icon">üëó</span><span data-i18n="nav_attire"></span></button>
    <button class="nav-item" onclick="navTo('section-song')"><span class="nav-icon">üéµ</span><span data-i18n="nav_song"></span></button>
    <div class="nav-sep"></div>
    <button class="nav-item" onclick="navTo('section-gifts')"><span class="nav-icon">üéÅ</span><span data-i18n="nav_gifts"></span></button>
    <button class="nav-item" onclick="navTo('section-qr')"><span class="nav-icon">üì≤</span><span data-i18n="nav_qr"></span></button>
    <button class="nav-item" onclick="navTo('section-rsvp')"><span class="nav-icon">‚úâÔ∏è</span><span data-i18n="nav_rsvp"></span></button>
  </div>
</div>

<!-- TOP BAR -->
<div class="top-bar">
  <div class="bar-left">
    <button class="ham-btn" id="ham-btn" onclick="toggleNav()" aria-label="Men√∫"><span></span><span></span><span></span></button>
    <div class="bar-player">
      <div class="bar-vinyl" id="bar-vinyl"></div>
      <div class="bar-song-info"><span class="bar-song-title" id="bar-song-title"></span><span class="bar-song-artist" id="bar-song-artist"></span></div>
      <div class="bar-progress"><div class="bar-progress-bar" id="bar-progress-bar"></div></div>
      <button class="bar-play-btn" id="bar-play-btn" onclick="toggleSong()"><svg id="bar-play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>
    </div>
  </div>
  <!-- Full monogram heart centered in bar -->
  <div class="bar-heart">
    <svg viewBox="0 0 320 260" xmlns="http://www.w3.org/2000/svg" width="38" height="31">
      <g class="heart-group">
        <path d="M160,228 L52,122 L52,100 L74,62 L108,44 L138,52 L160,78 L182,52 L212,44 L246,62 L268,100 L268,122 Z" fill="#E8A0B4" opacity="0.13"/>
        <path d="M160,228 L52,122 L52,100 L74,62 L108,44 L138,52 L160,78 L182,52 L212,44 L246,62 L268,100 L268,122 Z" fill="none" stroke="#C8965A" stroke-width="6" stroke-linejoin="round"/>
        <g stroke="#C8965A" stroke-width="3.5" fill="none" opacity=".7">
          <line x1="160" y1="78" x2="160" y2="122"/><line x1="160" y1="178" x2="160" y2="228"/>
          <line x1="52" y1="122" x2="142" y2="122"/><line x1="52" y1="100" x2="138" y2="118"/>
          <line x1="74" y1="62" x2="146" y2="114"/><line x1="108" y1="44" x2="150" y2="108"/>
          <line x1="138" y1="52" x2="155" y2="100"/><line x1="268" y1="122" x2="178" y2="122"/>
          <line x1="268" y1="100" x2="182" y2="118"/><line x1="246" y1="62" x2="174" y2="114"/>
          <line x1="212" y1="44" x2="170" y2="108"/><line x1="182" y1="52" x2="165" y2="100"/>
          <line x1="52" y1="122" x2="142" y2="178"/><line x1="142" y1="178" x2="160" y2="228"/>
          <line x1="268" y1="122" x2="178" y2="178"/><line x1="178" y1="178" x2="160" y2="228"/>
          <line x1="138" y1="52" x2="160" y2="78"/><line x1="182" y1="52" x2="160" y2="78"/>
          <line x1="52" y1="100" x2="108" y2="44"/><line x1="268" y1="100" x2="212" y2="44"/>
          <line x1="108" y1="44" x2="138" y2="52"/><line x1="212" y1="44" x2="182" y2="52"/>
        </g>
        <text x="160" y="162" font-family="Cormorant Garamond,Georgia,serif" font-size="58" font-style="italic" font-weight="400" fill="#E8A0B4" text-anchor="middle">D &amp; T</text>
      </g>
    </svg>
  </div>
  <div class="bar-right">
    <div class="lang-dropdown-wrap" id="lang-wrap">
      <button class="lang-icon-btn" onclick="toggleLangDropdown()">
        <span>üåê</span>
        <span class="lang-caret">‚ñæ</span>
      </button>
      <div class="lang-dropdown" id="lang-dropdown">
        <button class="lang-opt active" id="lo-es" onclick="setLang('es');closeLangDropdown()"><span class="lo-flag">üá≤üáΩ</span>Espa√±ol<span class="lo-check">‚úì</span></button>
        <button class="lang-opt" id="lo-en" onclick="setLang('en');closeLangDropdown()"><span class="lo-flag">üá®üá¶</span>English<span class="lo-check">‚úì</span></button>
        <button class="lang-opt" id="lo-pa" onclick="setLang('pa');closeLangDropdown()"><span class="lo-flag">üáÆüá≥</span>‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä<span class="lo-check">‚úì</span></button>
      </div>
    </div>
  </div>
</div>

<!-- HERO -->
<section id="section-hero" class="hero">
  <div class="hero-bg"></div>
  <div class="hero-corner-bl"></div><div class="hero-corner-br"></div>
  <div class="hero-names-outer" id="names-outer">
    <div class="names-writing-layer" id="names-writing-layer">
      <span class="names-wr-line" id="wr-name1"></span>
      <span class="names-wr-line amp-line" id="wr-amp"></span>
      <span class="names-wr-line" id="wr-name2"></span>
    </div>
    <h1 class="hero-names-final" id="names-final"><span id="fn1"></span><span class="amp"> &amp; </span><span id="fn2"></span></h1>
    <svg id="quill" viewBox="0 0 40 110" xmlns="http://www.w3.org/2000/svg">
      <path d="M20,3 Q36,14 33,48 Q27,66 20,78" fill="#DDB87A" opacity="0.82"/>
      <path d="M20,3 Q4,14 7,48 Q13,66 20,78" fill="#C8965A" opacity="0.82"/>
      <path d="M20,3 Q34,18 31,44 Q26,60 20,74" fill="none" stroke="#F0D080" stroke-width="1" opacity="0.55"/>
      <path d="M20,3 Q6,18 9,44 Q14,60 20,74" fill="none" stroke="#D4A850" stroke-width="0.7" opacity="0.4"/>
      <line x1="20" y1="18" x2="32" y2="24" stroke="#E8C870" stroke-width="0.5" opacity="0.4"/>
      <line x1="20" y1="30" x2="31" y2="35" stroke="#E8C870" stroke-width="0.5" opacity="0.4"/>
      <line x1="20" y1="42" x2="30" y2="46" stroke="#E8C870" stroke-width="0.5" opacity="0.4"/>
      <line x1="20" y1="54" x2="28" y2="57" stroke="#E8C870" stroke-width="0.5" opacity="0.35"/>
      <line x1="20" y1="18" x2="8" y2="24" stroke="#C8965A" stroke-width="0.5" opacity="0.4"/>
      <line x1="20" y1="30" x2="9" y2="35" stroke="#C8965A" stroke-width="0.5" opacity="0.4"/>
      <line x1="20" y1="42" x2="10" y2="46" stroke="#C8965A" stroke-width="0.5" opacity="0.4"/>
      <line x1="20" y1="54" x2="12" y2="57" stroke="#C8965A" stroke-width="0.5" opacity="0.35"/>
      <line x1="20" y1="3" x2="20" y2="92" stroke="#8B6010" stroke-width="1.3" stroke-linecap="round"/>
      <path d="M17.5,79 Q18.5,86 20,94 Q21.5,86 22.5,79 Q21.5,77 20,76 Q18.5,77 17.5,79Z" fill="#5C3A10"/>
      <line x1="20" y1="84" x2="20" y2="95" stroke="#3A1808" stroke-width="0.7" opacity="0.7"/>
      <ellipse cx="20" cy="97" rx="1.8" ry="2.6" fill="#2A160A" opacity="0.6"/>
      <circle cx="20" cy="100.5" r="1" fill="#3A2010" opacity="0.3"/>
    </svg>
  </div>

  <div class="hero-info-wrap" id="hero-info-wrap">
    <div class="side-lines"><div class="side-line"></div><div class="side-diamond"></div><div class="side-line"></div></div>
    <p class="hero-date" id="wedding-date-display"></p>
    <p class="hero-location" id="wedding-city"></p>
  </div>

  <div class="hero-slideshow" id="hero-slideshow">
    <div class="ss-frame" id="ss-frame">
      <div id="ss-track"></div>
      <div class="ss-overlay"></div>
      <div class="ss-arrows">
        <button class="ss-arrow" onclick="ssPrev()"><svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg></button>
        <button class="ss-arrow" onclick="ssNext()"><svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg></button>
      </div>
    </div>
    <div class="ss-dots" id="ss-dots"></div>
  </div>
</section>

<div class="elegant-divider fade"><svg viewBox="0 0 380 24" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="12" x2="148" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/><polygon points="162,12 168,7 174,12 168,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="179" y1="8" x2="179" y2="16" stroke="#C8965A" stroke-width=".7"/><circle cx="186" cy="12" r="2.5" fill="#C8965A" opacity=".7"/><line x1="193" y1="8" x2="193" y2="16" stroke="#C8965A" stroke-width=".7"/><polygon points="198,12 204,7 210,12 204,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="222" y1="12" x2="380" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/></svg></div>

<div class="countdown-wrap">
  <span class="section-label" data-i18n="countdown"></span>
  <div class="countdown">
    <div class="countdown-unit"><div class="countdown-num" id="cd-days">00</div><div class="countdown-label" data-i18n="days"></div></div>
    <div class="countdown-unit"><div class="countdown-num" id="cd-hours">00</div><div class="countdown-label" data-i18n="hours"></div></div>
    <div class="countdown-unit"><div class="countdown-num" id="cd-min">00</div><div class="countdown-label" data-i18n="minutes"></div></div>
    <div class="countdown-unit"><div class="countdown-num" id="cd-sec">00</div><div class="countdown-label" data-i18n="seconds"></div></div>
  </div>
</div>

<div class="elegant-divider fade"><svg viewBox="0 0 380 24" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="12" x2="148" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/><polygon points="162,12 168,7 174,12 168,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="179" y1="8" x2="179" y2="16" stroke="#C8965A" stroke-width=".7"/><circle cx="186" cy="12" r="2.5" fill="#C8965A" opacity=".7"/><line x1="193" y1="8" x2="193" y2="16" stroke="#C8965A" stroke-width=".7"/><polygon points="198,12 204,7 210,12 204,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="222" y1="12" x2="380" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/></svg></div>

<section id="section-message" class="content-wrap fade">
  <span class="section-label" data-i18n="messageLabel"></span>
  <h2 class="section-title" data-i18n="messageTitle"></h2>
  <p class="section-body" id="wedding-message"></p>
  <div class="section-photo-wrap photo-effect-tilt"><div class="section-torn" id="msg-photo"><div class="photo-ph" id="msg-ph"></div></div></div>
</section>

<div class="elegant-divider fade"><svg viewBox="0 0 380 24" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="12" x2="148" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/><polygon points="162,12 168,7 174,12 168,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="179" y1="8" x2="179" y2="16" stroke="#C8965A" stroke-width=".7"/><circle cx="186" cy="12" r="2.5" fill="#C8965A" opacity=".7"/><line x1="193" y1="8" x2="193" y2="16" stroke="#C8965A" stroke-width=".7"/><polygon points="198,12 204,7 210,12 204,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="222" y1="12" x2="380" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/></svg></div>

<section id="section-events" class="events-wrap fade">
  <div style="text-align:center;margin-bottom:32px;"><span class="section-label" data-i18n="scheduleLabel"></span></div>
  <div class="events-inner">
    <div><div class="event-icon">üìã</div><p class="event-type" data-i18n="civil"></p><p class="event-date" id="civil-date"></p><p class="event-time" id="civil-time"></p><p class="event-place" id="civil-place"></p><a class="map-btn" id="civil-map" href="#" target="_blank" data-i18n="viewMap"></a><div class="cal-wrap"><button class="cal-btn" onclick="toggleCalDropdown('cal-civil')">üìÖ <span data-i18n="addCal"></span></button><div class="cal-dropdown" id="cal-civil"><button class="cal-opt" onclick="openGoogleCal('civil')"><span>üóì</span> Google Calendar</button><button class="cal-opt" onclick="downloadICS('civil')"><span>üì±</span> Apple / Outlook</button></div></div></div>
    <div class="vline"></div>
    <div><div class="event-icon">‚õ™</div><p class="event-type" data-i18n="ceremony"></p><p class="event-date" id="temple-date"></p><p class="event-time" id="ceremony-time"></p><p class="event-place" id="ceremony-place"></p><a class="map-btn" id="ceremony-map" href="#" target="_blank" data-i18n="viewMap"></a><div class="cal-wrap"><button class="cal-btn" onclick="toggleCalDropdown('cal-temple')">üìÖ <span data-i18n="addCal"></span></button><div class="cal-dropdown" id="cal-temple"><button class="cal-opt" onclick="openGoogleCal('temple')"><span>üóì</span> Google Calendar</button><button class="cal-opt" onclick="downloadICS('temple')"><span>üì±</span> Apple / Outlook</button></div></div></div>
    <div class="vline"></div>
    <div><div class="event-icon">ü•Ç</div><p class="event-type" data-i18n="reception"></p><p class="event-date" id="reception-date"></p><p class="event-time" id="reception-time"></p><p class="event-place" id="reception-place"></p><a class="map-btn" id="reception-map" href="#" target="_blank" data-i18n="viewMap"></a><div class="cal-wrap"><button class="cal-btn" onclick="toggleCalDropdown('cal-reception')">üìÖ <span data-i18n="addCal"></span></button><div class="cal-dropdown" id="cal-reception"><button class="cal-opt" onclick="openGoogleCal('reception')"><span>üóì</span> Google Calendar</button><button class="cal-opt" onclick="downloadICS('reception')"><span>üì±</span> Apple / Outlook</button></div></div></div>
  </div>
  <div class="section-photo-wrap photo-effect-glow" style="margin-top:44px;"><div class="section-torn" id="events-photo"><div class="photo-ph" id="events-ph"></div></div></div>
</section>

<div class="elegant-divider fade"><svg viewBox="0 0 380 24" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="12" x2="148" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/><polygon points="162,12 168,7 174,12 168,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="179" y1="8" x2="179" y2="16" stroke="#C8965A" stroke-width=".7"/><circle cx="186" cy="12" r="2.5" fill="#C8965A" opacity=".7"/><line x1="193" y1="8" x2="193" y2="16" stroke="#C8965A" stroke-width=".7"/><polygon points="198,12 204,7 210,12 204,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="222" y1="12" x2="380" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/></svg></div>

<section id="section-dresscode" class="dresscode-wrap fade">
  <span class="section-label" data-i18n="dresscodeLabel"></span>
  <h2 class="section-title" id="dresscode-title"></h2>
  <div class="dress-figures">
    <div class="dress-figure"><svg class="figure-svg" viewBox="0 0 100 180" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="18" r="12" fill="none" stroke="#E8A0B4" stroke-width="2"/><line x1="50" y1="30" x2="50" y2="100" stroke="#E8A0B4" stroke-width="2"/><path d="M30,45 L50,38 L70,45 L68,100 L32,100 Z" fill="#E8A0B4" opacity="0.15" stroke="#E8A0B4" stroke-width="1.8" stroke-linejoin="round"/><path d="M50,38 L42,55 L50,60 L58,55 L50,38" fill="none" stroke="#E8A0B4" stroke-width="1.5"/><path d="M48,55 L47,72 L50,76 L53,72 L52,55 Z" fill="#C8965A" opacity="0.7"/><line x1="30" y1="45" x2="16" y2="82" stroke="#E8A0B4" stroke-width="2" stroke-linecap="round"/><line x1="70" y1="45" x2="84" y2="82" stroke="#E8A0B4" stroke-width="2" stroke-linecap="round"/><line x1="38" y1="100" x2="32" y2="155" stroke="#E8A0B4" stroke-width="2.5" stroke-linecap="round"/><line x1="62" y1="100" x2="68" y2="155" stroke="#E8A0B4" stroke-width="2.5" stroke-linecap="round"/><path d="M24,153 Q32,150 36,155 Q34,160 24,158 Z" fill="#C8965A" opacity="0.6"/><path d="M76,153 Q68,150 64,155 Q66,160 76,158 Z" fill="#C8965A" opacity="0.6"/></svg><p class="dress-label" data-i18n="gents"></p><p class="dress-desc" id="dress-desc-gents"></p></div>
    <div class="dress-figure"><svg class="figure-svg" viewBox="0 0 100 180" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="14" r="12" fill="none" stroke="#E8A0B4" stroke-width="2"/><line x1="50" y1="26" x2="50" y2="34" stroke="#E8A0B4" stroke-width="2"/><line x1="38" y1="48" x2="16" y2="44" stroke="#E8A0B4" stroke-width="2" stroke-linecap="round"/><line x1="62" y1="48" x2="84" y2="44" stroke="#E8A0B4" stroke-width="2" stroke-linecap="round"/><polygon points="40,34 60,34 65,60 80,170 20,170 35,60" fill="#E8A0B4" opacity="0.5" stroke="#E8A0B4" stroke-width="2" stroke-linejoin="round"/><polyline points="43,34 50,46 57,34" fill="none" stroke="#E8A0B4" stroke-width="1.5"/><line x1="36" y1="60" x2="64" y2="60" stroke="#C8965A" stroke-width="1" opacity="0.7"/></svg><p class="dress-label" data-i18n="ladies"></p><p class="dress-desc" id="dress-desc-ladies"></p></div>
  </div>
  <span class="section-label" style="margin-top:24px;display:block;" data-i18n="paletteLabel"></span>
  <div class="palette" id="palette"></div>
  <div class="section-photo-wrap photo-effect-polaroid"><div class="section-torn" id="dress-photo"><div class="photo-ph" id="dress-ph"></div></div></div>
</section>

<div class="elegant-divider fade"><svg viewBox="0 0 380 24" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="12" x2="148" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/><polygon points="162,12 168,7 174,12 168,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="179" y1="8" x2="179" y2="16" stroke="#C8965A" stroke-width=".7"/><circle cx="186" cy="12" r="2.5" fill="#C8965A" opacity=".7"/><line x1="193" y1="8" x2="193" y2="16" stroke="#C8965A" stroke-width=".7"/><polygon points="198,12 204,7 210,12 204,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="222" y1="12" x2="380" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/></svg></div>

<section id="section-song" class="song-wrap fade">
  <span class="section-label" data-i18n="songLabel"></span>
  <h2 class="section-title" data-i18n="songTitle2"></h2>
  <div style="width:100%;display:flex;flex-direction:column;align-items:center;margin-top:22px;">
    <div style="background:white;border:1px solid rgba(200,150,90,.22);padding:26px 22px;width:min(280px,86vw);display:flex;flex-direction:column;align-items:center;gap:16px;box-shadow:0 4px 24px rgba(60,30,40,.06);">
      <div id="song-vinyl" style="width:68px;height:68px;border-radius:50%;background:conic-gradient(#3A2A2E 0deg,#7a6a52 60deg,#3A2A2E 120deg,#7a6a52 180deg,#3A2A2E 240deg,#7a6a52 300deg,#3A2A2E 360deg);position:relative;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 14px rgba(0,0,0,.14);"><div style="width:18px;height:18px;border-radius:50%;background:var(--bg);position:absolute;"></div></div>
      <div style="text-align:center;"><p style="font-family:var(--serif);font-size:1.15rem;font-style:italic;color:var(--text);" id="song-title"></p><p style="font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:var(--accent);margin-top:3px;" id="song-artist"></p></div>
      <button class="bar-play-btn" style="width:44px;height:44px;" id="play-btn" onclick="toggleSong()"><svg id="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>
      <div style="width:100%;background:var(--light);border-radius:99px;height:2px;overflow:hidden;"><div id="progress-bar" style="height:100%;background:var(--accent);border-radius:99px;width:0%;transition:width .5s linear;"></div></div>
      <a id="song-link" href="#" target="_blank" style="font-size:.58rem;letter-spacing:3px;text-transform:uppercase;color:var(--text);text-decoration:none;border-bottom:1px solid rgba(200,150,90,.45);padding-bottom:1px;" data-i18n="listenSpotify"></a>
    </div>
  </div>
  <div class="section-photo-wrap photo-effect-film" style="margin:28px auto 0;"><div class="section-torn" id="song-photo"><div class="photo-ph" id="song-ph"></div></div></div>
</section>

<div class="elegant-divider fade"><svg viewBox="0 0 380 24" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="12" x2="148" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/><polygon points="162,12 168,7 174,12 168,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="179" y1="8" x2="179" y2="16" stroke="#C8965A" stroke-width=".7"/><circle cx="186" cy="12" r="2.5" fill="#C8965A" opacity=".7"/><line x1="193" y1="8" x2="193" y2="16" stroke="#C8965A" stroke-width=".7"/><polygon points="198,12 204,7 210,12 204,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="222" y1="12" x2="380" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/></svg></div>

<section id="section-gifts" class="gifts-wrap fade">
  <span class="section-label" data-i18n="giftsLabel"></span>
  <h2 class="section-title" data-i18n="giftsTitle"></h2>
  <p class="section-body" data-i18n="giftsBody"></p>
  <div class="gifts-grid" id="gifts-grid"></div>
  <div class="section-photo-wrap photo-effect-circle"><div class="section-torn" id="gifts-photo"><div class="photo-ph" id="gifts-ph"></div></div></div>
</section>

<div class="elegant-divider fade"><svg viewBox="0 0 380 24" xmlns="http://www.w3.org/2000/svg"><line x1="0" y1="12" x2="148" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/><polygon points="162,12 168,7 174,12 168,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="179" y1="8" x2="179" y2="16" stroke="#C8965A" stroke-width=".7"/><circle cx="186" cy="12" r="2.5" fill="#C8965A" opacity=".7"/><line x1="193" y1="8" x2="193" y2="16" stroke="#C8965A" stroke-width=".7"/><polygon points="198,12 204,7 210,12 204,17" fill="none" stroke="#C8965A" stroke-width=".8"/><line x1="222" y1="12" x2="380" y2="12" stroke="#C8965A" stroke-width=".5" opacity=".4"/></svg></div>

<section id="section-qr" class="qr-wrap fade">
  <span class="section-label" data-i18n="qrLabel"></span>
  <h2 class="section-title" data-i18n="qrTitle"></h2>
  <p class="section-body" data-i18n="qrBody"></p>
  <div id="qr-canvas"></div>
  <p class="qr-sub" data-i18n="qrSub"></p><br>
  <button class="qr-btn" onclick="downloadAllICS()" data-i18n="qrDownloadICS"></button>
</section>

<section id="section-rsvp" class="rsvp-wrap fade">
  <span class="section-label" style="color:rgba(255,255,255,.32);" data-i18n="rsvpLabel"></span>
  <h2 class="rsvp-title" data-i18n="rsvpTitle"></h2>
  <p class="rsvp-body" id="rsvp-deadline"></p>
  <a class="rsvp-btn" id="rsvp-link" href="#" target="_blank" data-i18n="rsvpBtn"></a>
</section>
<footer><span id="footer-names"></span> &nbsp;¬∑&nbsp; <span id="footer-year"></span></footer>

<script>
/* ‚îÄ‚îÄ CONFIG ‚îÄ‚îÄ */
var WEDDING = {
  name1:"Dallany", name2:"Tony", heartInitials:"D & T",
  dateISO:"2026-07-03T17:00:00", city:"Chihuahua, M√©xico",
  dateDisplay:{es:"Viernes, 3 de Julio de 2026", en:"Friday, July 3rd, 2026", pa:"‡®∏‡®º‡©Å‡©±‡®ï‡®∞‡®µ‡®æ‡®∞, 3 ‡®ú‡©Å‡®≤‡®æ‡®à 2026"},
  message:{
    es:"Con inmensa alegr√≠a y amor en nuestros corazones, los invitamos a compartir el d√≠a m√°s especial de nuestras vidas. Su presencia har√° este momento a√∫n m√°s memorable y lleno de amor.",
    en:"With immense joy and love in our hearts, we invite you to share the most special day of our lives. Your presence will make this moment even more memorable and full of love.",
    pa:"‡®Ü‡®™‡®£‡©á ‡®¶‡®ø‡®≤‡®æ‡®Ç ‡®µ‡®ø‡©±‡®ö ‡®Ö‡®•‡®æ‡®π ‡®ñ‡©Å‡®∏‡®º‡©Ä ‡®Ö‡®§‡©á ‡®™‡®ø‡®Ü‡®∞ ‡®®‡®æ‡®≤, ‡®Ö‡®∏‡©Ä‡®Ç ‡®§‡©Å‡®π‡®æ‡®®‡©Ç‡©∞ ‡®Ü‡®™‡®£‡©Ä ‡®ú‡®º‡®ø‡©∞‡®¶‡®ó‡©Ä ‡®¶‡©á ‡®∏‡®≠ ‡®§‡©ã‡®Ç ‡®ñ‡®æ‡®∏ ‡®¶‡®ø‡®® ‡®µ‡®ø‡©±‡®ö ‡®∏‡®º‡®æ‡®Æ‡®≤ ‡®π‡©ã‡®£ ‡®≤‡®à ‡®∏‡©±‡®¶‡®æ ‡®¶‡®ø‡©∞‡®¶‡©á ‡®π‡®æ‡®Ç‡•§"
  },
  calEvents:{
    civil:{titleES:"Boda Civil ‚Äì Dallany & Tony", titleEN:"Civil Wedding ‚Äì Dallany & Tony", start:"20260701T120000", end:"20260701T140000", location:"Registro Civil No. 1, Chihuahua, M√©xico"},
    temple:{titleES:"Ceremonia Religiosa ‚Äì Dallany & Tony", titleEN:"Church Ceremony ‚Äì Dallany & Tony", start:"20260702T160000", end:"20260702T180000", location:"Colonia Juarez Temple, Chihuahua, M√©xico"},
    reception:{titleES:"Recepci√≥n ‚Äì Dallany & Tony", titleEN:"Reception ‚Äì Dallany & Tony", start:"20260703T190000", end:"20260703T235900", location:"Sal√≥n Los Jardines, Chihuahua, M√©xico"}
  },
  civilDate:"Mi√©rcoles, 1 de Julio de 2026", civilTime:"12:00 PM",
  civilPlace:"Registro Civil No. 1\nChihuahua, M√©xico", civilMap:"https://maps.google.com/?q=Registro+Civil+Chihuahua",
  templeDate:"Jueves, 2 de Julio de 2026", templeTime:"4:00 PM",
  templePlace:"Colonia Juarez Temple\nChihuahua, M√©xico", templeMap:"https://maps.app.goo.gl/ywPJZuzydDq6wroc6",
  receptionDate:"Viernes, 3 de Julio de 2026", receptionTime:"7:00 PM",
  receptionPlace:"Sal√≥n Los Jardines\nChihuahua, M√©xico", receptionMap:"https://maps.google.com/?q=Salon+Los+Jardines+Chihuahua",
  dresscodeTitle:{es:"Formal", en:"Formal Attire", pa:"‡®∞‡®∏‡®Æ‡©Ä ‡®™‡®π‡®ø‡®∞‡®æ‡®µ‡®æ"},
  dresscodeGents:{es:"Traje oscuro\nCamisa blanca\nCorbata o mo√±o", en:"Dark suit\nWhite dress shirt\nTie or bow tie", pa:"‡®ó‡®π‡®ø‡®∞‡®æ ‡®∏‡©Ç‡®ü\n‡®ö‡®ø‡©±‡®ü‡©Ä ‡®ï‡®Æ‡©Ä‡®ú‡®º\n‡®ü‡®æ‡®à ‡®ú‡®æ‡®Ç ‡®¨‡©ã ‡®ü‡®æ‡®à"},
  dresscodeLadies:{es:"Vestido largo\no cocktail\nTacones", en:"Long gown\nor cocktail dress\nHeels", pa:"‡®≤‡©∞‡®Æ‡©Ä ‡®ó‡®æ‡®ä‡®®\n‡®ú‡®æ‡®Ç ‡®ï‡®æ‡®ï‡®ü‡©á‡®≤ ‡®°‡®∞‡©à‡©±‡®∏\n‡®π‡©Ä‡®≤"},
  palette:["#E8A0B4","#F2C4D0","#C8965A","#DDB87A","#FAEEF2"],
  songTitle:"Perfect", songArtist:"Ed Sheeran",
  songSpotify:"https://open.spotify.com/track/0tgVpDi06FyKpA1z0VMD4v",
  songAudio:"Ed Sheeran - Perfect (Official Music Video) - (320 Kbps).mp3",
  gifts:[{store:"PayPal", icon:"paypal", url:"https://www.paypal.com/paypalme/TUUSUARIO"}],
  rsvpDeadline:{es:"1 de Mayo de 2026", en:"May 1st, 2026", pa:"1 ‡®Æ‡®à 2026"},
  rsvpLink:"https://wa.me/521234567890?text=Confirmo+asistencia",
  inviteURL:"https://tu-invitacion.netlify.app",
  docTitle:"Invitaci√≥n Dallany & Tony",
  photoHero:"img/IMG_7517.jpeg",
  photoMsg:"img/Facetune_07-02-2026-13-18-06.jpeg",
  photoEvents:"img/Facetune_07-02-2026-13-59-51.jpeg",
  photoDress:"img/Facetune_07-02-2026-14-07-42.jpeg",
  photoSong:"img/IMG_7485.jpeg",
  photoGifts:"img/Facetune_07-02-2026-14-02-18.jpeg"
};

var PAYPAL_SVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 165 40" width="165" height="40"><text x="2" y="28" font-family="Arial Black,Arial,sans-serif" font-weight="900" font-size="32" fill="#F2C4D0">P</text><text x="12" y="32" font-family="Arial Black,Arial,sans-serif" font-weight="900" font-size="32" fill="#E8A0B4">P</text><text x="50" y="28" font-family="Arial,Helvetica,sans-serif" font-weight="700" font-size="20" fill="#E8A0B4" letter-spacing="-0.3">PayPal</text></svg>';

var T = {
  es:{weddingTag:"nos casamos",countdown:"cuenta regresiva",days:"d√≠as",hours:"horas",minutes:"minutos",seconds:"segundos",messageLabel:"un mensaje para ustedes",messageTitle:"Juntos para siempre",scheduleLabel:"fechas importantes y ubicaci√≥n",civil:"boda civil",ceremony:"ceremonia religiosa",reception:"recepci√≥n",viewMap:"ver en mapa",addCal:"al calendario",dresscodeLabel:"c√≥digo de vestimenta",gents:"caballeros",ladies:"damas",paletteLabel:"paleta de colores sugerida",songLabel:"nuestra canci√≥n",songTitle2:"La m√∫sica de nuestro amor",listenSpotify:"escuchar en spotify",giftsLabel:"mesa de regalos",giftsTitle:"Un regalo del coraz√≥n",giftsBody:"Tu presencia es nuestro mejor regalo. Si deseas hacernos un obsequio, aqu√≠ encontrar√°s nuestras mesas.",qrLabel:"agregar al calendario",qrTitle:"Escanea para guardar las fechas",qrBody:"Escanea este c√≥digo con tu tel√©fono para guardar todos los eventos en tu calendario.",qrSub:"Compatible con Google Calendar, Apple Calendar y Outlook",qrDownloadICS:"üìÖ Agregar eventos a mi calendario",rsvpLabel:"confirmaci√≥n de asistencia",rsvpTitle:"¬øNos acompa√±as?",rsvpBtn:"confirmar asistencia",confirmBefore:"Por favor confirma antes del",giftCta:"Enviar regalo ‚Üí",nav_home:"Inicio",nav_message:"Mensaje",nav_dates:"Fechas y Ubicaci√≥n",nav_attire:"Vestimenta",nav_song:"Canci√≥n",nav_gifts:"Regalos",nav_qr:"Calendario",nav_rsvp:"Confirmar"},
  en:{weddingTag:"we're getting married",countdown:"countdown",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds",messageLabel:"a message for you",messageTitle:"Together Forever",scheduleLabel:"important dates & location",civil:"civil wedding",ceremony:"church ceremony",reception:"reception",viewMap:"view on map",addCal:"add to calendar",dresscodeLabel:"dress code",gents:"gentlemen",ladies:"ladies",paletteLabel:"suggested color palette",songLabel:"our song",songTitle2:"The Music of Our Love",listenSpotify:"listen on spotify",giftsLabel:"gift registry",giftsTitle:"A Gift from the Heart",giftsBody:"Your presence is our greatest gift. If you wish to give us something, find our registries here.",qrLabel:"add to calendar",qrTitle:"Scan to save the dates",qrBody:"Scan this code to add all events to your calendar.",qrSub:"Compatible with Google Calendar, Apple Calendar & Outlook",qrDownloadICS:"üìÖ Add events to my calendar",rsvpLabel:"rsvp",rsvpTitle:"Will you join us?",rsvpBtn:"confirm attendance",confirmBefore:"Please confirm before",giftCta:"Send a gift ‚Üí",nav_home:"Home",nav_message:"Message",nav_dates:"Dates & Location",nav_attire:"Attire",nav_song:"Song",nav_gifts:"Gifts",nav_qr:"Calendar",nav_rsvp:"RSVP"},
  pa:{weddingTag:"‡®Ö‡®∏‡©Ä‡®Ç ‡®µ‡®ø‡®Ü‡®π ‡®ï‡®∞‡®µ‡®æ ‡®∞‡®π‡©á ‡®π‡®æ‡®Ç",countdown:"‡®â‡®≤‡®ü‡©Ä ‡®ó‡®ø‡®£‡®§‡©Ä",days:"‡®¶‡®ø‡®®",hours:"‡®ò‡©∞‡®ü‡©á",minutes:"‡®Æ‡®ø‡©∞‡®ü",seconds:"‡®∏‡®ï‡®ø‡©∞‡®ü",messageLabel:"‡®§‡©Å‡®π‡®æ‡®°‡©á ‡®≤‡®à ‡®∏‡©Å‡®®‡©á‡®π‡®æ",messageTitle:"‡®π‡®Æ‡©á‡®∏‡®º‡®æ ‡®≤‡®à ‡®á‡®ï‡©±‡®†‡©á",scheduleLabel:"‡®Æ‡®π‡©±‡®§‡®µ‡®™‡©Ç‡®∞‡®® ‡®§‡®æ‡®∞‡©Ä‡®ñ‡®æ‡®Ç ‡®Ö‡®§‡©á ‡®∏‡®•‡®æ‡®®",civil:"‡®∏‡®ø‡®µ‡®≤ ‡®µ‡®ø‡®Ü‡®π",ceremony:"‡®ß‡®æ‡®∞‡®Æ‡®ø‡®ï ‡®∏‡®Æ‡®æ‡®∞‡©ã‡®π",reception:"‡®∏‡®µ‡®æ‡®ó‡®§ ‡®∏‡®Æ‡®æ‡®∞‡©ã‡®π",viewMap:"‡®®‡®ï‡®∏‡®º‡©á '‡®§‡©á ‡®µ‡©á‡®ñ‡©ã",addCal:"‡®ï‡©à‡®≤‡©∞‡®°‡®∞ ‡®µ‡®ø‡©±‡®ö ‡®ú‡©ã‡©ú‡©ã",dresscodeLabel:"‡®™‡®π‡®ø‡®∞‡®æ‡®µ‡©á ‡®¶‡®æ ‡®ï‡©ã‡®°",gents:"‡®∏‡©±‡®ú‡®£",ladies:"‡®Æ‡®π‡®ø‡®≤‡®æ‡®µ‡®æ‡®Ç",paletteLabel:"‡®∏‡©Å‡®ù‡®æ‡®à ‡®ó‡®à ‡®∞‡©∞‡®ó ‡®™‡©à‡®≤‡©á‡®ü",songLabel:"‡®∏‡®æ‡®°‡®æ ‡®ó‡©Ä‡®§",songTitle2:"‡®∏‡®æ‡®°‡©á ‡®™‡®ø‡®Ü‡®∞ ‡®¶‡®æ ‡®∏‡©∞‡®ó‡©Ä‡®§",listenSpotify:"‡®∏‡®™‡©ã‡®ü‡©Ä‡®´‡®æ‡®à '‡®§‡©á ‡®∏‡©Å‡®£‡©ã",giftsLabel:"‡®§‡©ã‡®π‡®´‡®º‡©á ‡®¶‡©Ä ‡®∏‡©Ç‡®ö‡©Ä",giftsTitle:"‡®¶‡®ø‡®≤ ‡®§‡©ã‡®Ç ‡®á‡©±‡®ï ‡®§‡©ã‡®π‡®´‡®º‡®æ",giftsBody:"‡®§‡©Å‡®π‡®æ‡®°‡©Ä ‡®π‡®æ‡®ú‡®º‡®∞‡©Ä ‡®∏‡®æ‡®°‡®æ ‡®∏‡®≠ ‡®§‡©ã‡®Ç ‡®µ‡©±‡®°‡®æ ‡®§‡©ã‡®π‡®´‡®º‡®æ ‡®π‡©à‡•§",qrLabel:"‡®ï‡©à‡®≤‡©∞‡®°‡®∞ ‡®µ‡®ø‡©±‡®ö ‡®ú‡©ã‡©ú‡©ã",qrTitle:"‡®§‡®æ‡®∞‡©Ä‡®ñ‡®æ‡®Ç ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®ï‡®∞‡®® ‡®≤‡®à ‡®∏‡®ï‡©à‡®® ‡®ï‡®∞‡©ã",qrBody:"‡®∏‡®æ‡®∞‡©á ‡®∏‡®Æ‡®æ‡®ó‡®Æ ‡®Ü‡®™‡®£‡©á ‡®ï‡©à‡®≤‡©∞‡®°‡®∞ ‡®µ‡®ø‡©±‡®ö ‡®ú‡©ã‡©ú‡®® ‡®≤‡®à ‡®á‡®π ‡®ï‡©ã‡®° ‡®∏‡®ï‡©à‡®® ‡®ï‡®∞‡©ã‡•§",qrSub:"Google, Apple ‡®Ö‡®§‡©á Outlook ‡®ï‡©à‡®≤‡©∞‡®°‡®∞ ‡®¶‡©á ‡®Ö‡®®‡©Å‡®ï‡©Ç‡®≤",qrDownloadICS:"üìÖ ‡®ï‡©à‡®≤‡©∞‡®°‡®∞ ‡®µ‡®ø‡©±‡®ö ‡®∏‡®Æ‡®æ‡®ó‡®Æ ‡®ú‡©ã‡©ú‡©ã",rsvpLabel:"‡®π‡®æ‡®ú‡®º‡®∞‡©Ä ‡®¶‡©Ä ‡®™‡©Å‡®∏‡®º‡®ü‡©Ä",rsvpTitle:"‡®ï‡©Ä ‡®§‡©Å‡®∏‡©Ä‡®Ç ‡®Ü‡®ì‡®ó‡©á?",rsvpBtn:"‡®π‡®æ‡®ú‡®º‡®∞‡©Ä ‡®¶‡©Ä ‡®™‡©Å‡®∏‡®º‡®ü‡©Ä ‡®ï‡®∞‡©ã",confirmBefore:"‡®ï‡®ø‡®∞‡®™‡®æ ‡®ï‡®∞‡®ï‡©á ‡®á‡®∏ ‡®§‡©ã‡®Ç ‡®™‡®π‡®ø‡®≤‡®æ‡®Ç ‡®™‡©Å‡®∏‡®º‡®ü‡©Ä ‡®ï‡®∞‡©ã",giftCta:"‡®µ‡©á‡®ñ‡©ã ‚Üí",nav_home:"‡®Æ‡©Å‡©±‡®ñ",nav_message:"‡®∏‡©Å‡®®‡©á‡®π‡®æ",nav_dates:"‡®§‡®æ‡®∞‡©Ä‡®ñ‡®æ‡®Ç ‡®Ö‡®§‡©á ‡®∏‡®•‡®æ‡®®",nav_attire:"‡®™‡®π‡®ø‡®∞‡®æ‡®µ‡®æ",nav_song:"‡®ó‡©Ä‡®§",nav_gifts:"‡®§‡©ã‡®π‡®´‡®º‡©á",nav_qr:"‡®ï‡©à‡®≤‡©∞‡®°‡®∞",nav_rsvp:"‡®™‡©Å‡®∏‡®º‡®ü‡©Ä"}
};

var PH = {
  msg:'<svg viewBox="0 0 200 220" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="200" height="220" fill="#FAEEF2"/><rect x="30" y="68" width="140" height="100" rx="2" fill="none" stroke="#C8965A" stroke-width="1" opacity=".5"/><path d="M30,68 L100,118 L170,68" fill="none" stroke="#C8965A" stroke-width="1" opacity=".5"/><circle cx="100" cy="143" r="14" fill="none" stroke="#C8965A" stroke-width=".8" opacity=".5"/><text x="100" y="148" text-anchor="middle" font-family="Cormorant Garamond,serif" font-size="12" font-style="italic" fill="#C8965A" opacity=".7">D&amp;T</text></svg>',
  events:'<svg viewBox="0 0 200 220" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="200" height="220" fill="#FAEEF2"/><path d="M55,195 L55,100 Q55,55 100,55 Q145,55 145,100 L145,195" fill="none" stroke="#E8A0B4" stroke-width="1.2" opacity=".45"/></svg>',
  dress:'<svg viewBox="0 0 200 220" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="200" height="220" fill="#FAEEF2"/><path d="M80,62 Q74,78 70,92 L50,190 L150,190 L130,92 Q126,78 120,62Z" fill="#E8A0B4" opacity=".12" stroke="#E8A0B4" stroke-width="1"/></svg>',
  song:'<svg viewBox="0 0 200 220" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="200" height="220" fill="#FAEEF2"/><circle cx="100" cy="105" r="62" fill="none" stroke="#E8A0B4" stroke-width="1" opacity=".4"/><circle cx="100" cy="105" r="5" fill="#C8965A" opacity=".6"/></svg>',
  gifts:'<svg viewBox="0 0 200 220" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="200" height="220" fill="#FAEEF2"/><rect x="45" y="110" width="110" height="80" rx="2" fill="#E8A0B4" opacity=".1" stroke="#E8A0B4" stroke-width="1"/><path d="M100,95 Q80,78 68,82 Q62,88 80,95Z" fill="#C8965A" opacity=".4"/><path d="M100,95 Q120,78 132,82 Q138,88 120,95Z" fill="#C8965A" opacity=".4"/><circle cx="100" cy="95" r="5" fill="#C8965A" opacity=".5"/></svg>'
};

/* ‚îÄ‚îÄ SLIDESHOW ‚îÄ‚îÄ */
var ssIndex = 0, ssTimer = null, ssSlides = [];
var ssPhotos = [WEDDING.photoHero, WEDDING.photoMsg, WEDDING.photoEvents, WEDDING.photoDress, WEDDING.photoSong, WEDDING.photoGifts];
var ssPHsvg = [
  '<svg viewBox="0 0 500 340" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="500" height="340" fill="#FAEEF2"/><text x="250" y="200" text-anchor="middle" font-family="Great Vibes,cursive" font-size="48" fill="#E8A0B4" opacity=".35">Dallany &amp; Tony</text></svg>',
  '<svg viewBox="0 0 500 340" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="500" height="340" fill="#FAEEF2"/><path d="M160,100 Q250,60 340,100 Q380,200 250,290 Q120,200 160,100Z" fill="#E8A0B4" opacity=".12" stroke="#E8A0B4" stroke-width="1"/></svg>',
  '<svg viewBox="0 0 500 340" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="500" height="340" fill="#FAEEF2"/><text x="250" y="195" text-anchor="middle" font-family="Cormorant Garamond,serif" font-size="22" font-style="italic" fill="#C8965A" opacity=".5">Chihuahua, M√©xico</text></svg>',
  '<svg viewBox="0 0 500 340" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="500" height="340" fill="#FAEEF2"/><polygon points="250,60 270,120 340,120 285,158 305,220 250,182 195,220 215,158 160,120 230,120" fill="#E8A0B4" opacity=".18" stroke="#C8965A" stroke-width="1"/></svg>',
  '<svg viewBox="0 0 500 340" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="500" height="340" fill="#FAEEF2"/><circle cx="250" cy="155" r="90" fill="none" stroke="#E8A0B4" stroke-width="1.2" opacity=".4"/><circle cx="250" cy="155" r="8" fill="#C8965A" opacity=".5"/></svg>',
  '<svg viewBox="0 0 500 340" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;"><rect width="500" height="340" fill="#FAEEF2"/><rect x="110" y="160" width="280" height="120" rx="2" fill="#E8A0B4" opacity=".1" stroke="#E8A0B4" stroke-width="1"/></svg>'
];

function buildSlideshow() {
  var track = document.getElementById('ss-track');
  var dots = document.getElementById('ss-dots');
  if (!track || !dots) { return; }
  track.innerHTML = ''; dots.innerHTML = ''; ssSlides = [];
  ssPhotos.forEach(function(src, i) {
    var slide = document.createElement('div');
    slide.className = 'ss-slide' + (i === 0 ? ' active' : '');
    if (src) {
      var img = document.createElement('img');
      img.src = src; img.alt = '';
      img.onerror = function() { slide.innerHTML = '<div class="ss-ph">' + ssPHsvg[i] + '</div>'; };
      slide.appendChild(img);
    } else {
      slide.innerHTML = '<div class="ss-ph">' + ssPHsvg[i] + '</div>';
    }
    track.appendChild(slide);
    ssSlides.push(slide);
    var dot = document.createElement('button');
    dot.className = 'ss-dot' + (i === 0 ? ' active' : '');
    dot.onclick = (function(n) { return function() { ssGoTo(n); }; })(i);
    dots.appendChild(dot);
  });
}

function ssGoTo(n) {
  ssSlides[ssIndex].classList.remove('active');
  document.querySelectorAll('.ss-dot')[ssIndex].classList.remove('active');
  ssIndex = (n + ssSlides.length) % ssSlides.length;
  ssSlides[ssIndex].classList.add('active');
  document.querySelectorAll('.ss-dot')[ssIndex].classList.add('active');
}
function ssNext() { clearInterval(ssTimer); ssGoTo(ssIndex + 1); ssTimer = setInterval(function() { ssGoTo(ssIndex + 1); }, 3800); }
function ssPrev() { clearInterval(ssTimer); ssGoTo(ssIndex - 1); ssTimer = setInterval(function() { ssGoTo(ssIndex + 1); }, 3800); }
function startSlideshow() { ssTimer = setInterval(function() { ssGoTo(ssIndex + 1); }, 3800); }
window.ssNext = ssNext;
window.ssPrev = ssPrev;

/* ‚îÄ‚îÄ QUILL ‚îÄ‚îÄ */
var writeTriggered = false;

function buildNameSpans() {
  var l1 = document.getElementById('wr-name1');
  var lA = document.getElementById('wr-amp');
  var l2 = document.getElementById('wr-name2');
  var h = '';
  for (var i = 0; i < WEDDING.name1.length; i++) {
    var ch = WEDDING.name1[i];
    h += '<span class="wc">' + (ch === ' ' ? ' ' : ch) + '</span>';
  }
  l1.innerHTML = h; h = '';
  lA.innerHTML = '<span class="wc wc-amp">&amp;</span>';
  for (var j = 0; j < WEDDING.name2.length; j++) {
    var c2 = WEDDING.name2[j];
    h += '<span class="wc">' + (c2 === ' ' ? ' ' : c2) + '</span>';
  }
  l2.innerHTML = h;
  document.getElementById('fn1').textContent = WEDDING.name1;
  document.getElementById('fn2').textContent = WEDDING.name2;
}

function triggerWrite() {
  if (writeTriggered) { return; }
  writeTriggered = true;
  var outer = document.getElementById('names-outer');
  var quill = document.getElementById('quill');
  var chars = Array.prototype.slice.call(document.querySelectorAll('#wr-name1 .wc, #wr-amp .wc, #wr-name2 .wc'));
  if (!chars.length) { return; }
  var qW = quill.offsetWidth || 36;
  var qH = quill.offsetHeight || 90;
  quill.style.opacity = '1';
  quill.classList.add('writing');
  var charMs = 170;
  var delay = 300;
  chars.forEach(function(span) {
    var isSpace = span.textContent.trim() === '';
    var dur = isSpace ? 40 : charMs + Math.random() * 60;
    setTimeout((function(s, sp) {
      return function() {
        var spanR = s.getBoundingClientRect();
        var outerR = outer.getBoundingClientRect();
        quill.style.left = (spanR.left - outerR.left + spanR.width * 0.18 - qW * 0.5) + 'px';
        quill.style.top  = (spanR.top  - outerR.top  + spanR.height * 0.65 - qH * 0.88) + 'px';
        s.style.transition = 'clip-path ' + (sp ? 0 : charMs * 0.85) + 'ms ease-out';
        s.classList.add('on');
      };
    })(span, isSpace), delay);
    delay += dur;
  });
  var total = delay;
  setTimeout(function() {
    quill.classList.remove('writing');
    quill.style.transition = 'opacity .7s ease,left .12s ease-out,top .12s ease-out';
    quill.style.opacity = '0';
  }, total + 150);
  setTimeout(function() { document.getElementById('names-writing-layer').classList.add('exit'); }, total + 450);
  setTimeout(function() { document.getElementById('names-final').classList.add('show'); }, total + 750);
  setTimeout(function() { document.getElementById('hero-info-wrap').classList.add('show'); }, total + 1100);
  setTimeout(function() { document.getElementById('hero-slideshow').classList.add('show'); startSlideshow(); }, total + 1650);
}

/* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
var navOpen = false;
window.toggleNav = function() { if (navOpen) { closeNav(); } else { openNav(); } };
function openNav() { navOpen = true; document.getElementById('nav-drawer').classList.add('open'); document.getElementById('nav-overlay').classList.add('open'); document.getElementById('ham-btn').classList.add('open'); }
window.closeNav = function() { navOpen = false; document.getElementById('nav-drawer').classList.remove('open'); document.getElementById('nav-overlay').classList.remove('open'); document.getElementById('ham-btn').classList.remove('open'); };
window.navTo = function(id) { var el = document.getElementById(id); if (el) { window.scrollTo({top: el.getBoundingClientRect().top + window.scrollY - 54, behavior: 'smooth'}); } window.closeNav(); };

/* ‚îÄ‚îÄ LANGUAGE DROPDOWN ‚îÄ‚îÄ */
window.toggleLangDropdown = function() { document.getElementById('lang-dropdown').classList.toggle('open'); };
window.closeLangDropdown = function() { document.getElementById('lang-dropdown').classList.remove('open'); };

/* ‚îÄ‚îÄ ENVELOPE ‚îÄ‚îÄ */
var envOpened = false;
window.openEnvelope = function() {
  if (envOpened) { return; } envOpened = true;
  var hint = document.getElementById('env-hint'), skip = document.getElementById('env-skip');
  var flap = document.getElementById('env-flap'), card = document.getElementById('env-card');
  var mono = document.getElementById('env-mono'), ov = document.getElementById('env-overlay');
  if (hint) { hint.style.transition = 'opacity .3s'; hint.style.opacity = '0'; }
  if (skip) { skip.style.opacity = '0'; }
  if (mono) { mono.style.animation = 'none'; }
  if (flap) { flap.style.transform = 'perspective(900px) rotateX(-178deg)'; }
  setTimeout(function() { if (card) { card.style.animation = 'cardRise 1s cubic-bezier(.22,1,.36,1) forwards'; } }, 700);
  setTimeout(function() {
    var flash = document.createElement('div');
    flash.style.cssText = 'position:fixed;inset:0;z-index:10001;background:#FDFAF8;opacity:0;transition:opacity 0.6s ease;';
    document.body.appendChild(flash); void flash.offsetWidth; flash.style.opacity = '1';
    setTimeout(function() {
      var o = document.getElementById('env-overlay'); if (o && o.parentNode) { o.remove(); }
      setTimeout(function() {
        flash.style.transition = 'opacity 0.5s ease'; flash.style.opacity = '0';
        setTimeout(function() { if (flash.parentNode) { flash.remove(); } triggerWrite(); setTimeout(autoplaySong, 800); }, 500);
      }, 100);
    }, 600);
  }, 1900);
  setTimeout(function() { if (ov) { ov.classList.add('gone'); setTimeout(function() { if (ov && ov.parentNode) { ov.remove(); } }, 600); } }, 2500);
};
window.closeEnvelope = function() {
  envOpened = true;
  var ov = document.getElementById('env-overlay');
  if (ov) { ov.classList.add('gone'); setTimeout(function() { if (ov && ov.parentNode) { ov.remove(); } }, 500); }
  setTimeout(triggerWrite, 200);
  setTimeout(autoplaySong, 600);
};

/* ‚îÄ‚îÄ HELPERS ‚îÄ‚îÄ */
function safeSet(id, val, mode) {
  var el = document.getElementById(id); if (!el) { return; }
  if (mode === 'html') { el.innerHTML = val; } else { el.textContent = val; }
}
function setPhoto(id, url, phId) {
  var el = document.getElementById(id); if (!el) { return; }
  if (url) { el.innerHTML = '<img src="' + url + '" alt="" style="width:100%;height:100%;object-fit:cover;display:block;">'; }
  else { var ph = document.getElementById(phId); if (ph && PH[phId.replace('-ph', '')]) { ph.innerHTML = PH[phId.replace('-ph', '')]; } }
}

/* ‚îÄ‚îÄ LANGUAGE ‚îÄ‚îÄ */
var currentLang = 'es';
window.setLang = function(lang) {
  currentLang = lang; document.body.className = 'lang-' + lang;
  var flags = {es: 'üá≤üáΩ', en: 'üá®üá¶', pa: 'üáÆüá≥'};
  var flagEl = document.getElementById('lang-flag');
  if (flagEl) { flagEl.textContent = flags[lang]; }
  ['es','en','pa'].forEach(function(l) { var el = document.getElementById('lo-' + l); if (el) { el.classList.toggle('active', l === lang); } });
  var t = T[lang];
  document.querySelectorAll('[data-i18n]').forEach(function(el) { var k = el.getAttribute('data-i18n'); if (t[k] !== undefined) { el.textContent = t[k]; } });
  safeSet('wedding-date-display', WEDDING.dateDisplay[lang]);
  safeSet('wedding-message', WEDDING.message[lang]);
  safeSet('dresscode-title', WEDDING.dresscodeTitle[lang]);
  safeSet('dress-desc-gents', WEDDING.dresscodeGents[lang].replace(/\n/g, '<br>'), 'html');
  safeSet('dress-desc-ladies', WEDDING.dresscodeLadies[lang].replace(/\n/g, '<br>'), 'html');
  safeSet('rsvp-deadline', t.confirmBefore + ' <strong style="color:rgba(255,255,255,.8)">' + WEDDING.rsvpDeadline[lang] + '</strong>', 'html');
  document.querySelectorAll('.gift-cta').forEach(function(el) { el.textContent = t.giftCta; });
};

/* ‚îÄ‚îÄ CALENDAR ‚îÄ‚îÄ */
window.toggleCalDropdown = function(id) {
  var dd = document.getElementById(id);
  var open = dd.classList.contains('open');
  document.querySelectorAll('.cal-dropdown').forEach(function(d) { d.classList.remove('open'); });
  if (!open) { dd.classList.add('open'); }
};
function getCalEvent(k) {
  var ev = WEDDING.calEvents[k];
  return {start: ev.start, end: ev.end, location: ev.location, title: currentLang === 'en' ? ev.titleEN : ev.titleES};
}
window.openGoogleCal = function(k) {
  var ev = getCalEvent(k);
  window.open('https://www.google.com/calendar/render?action=TEMPLATE&text=' + encodeURIComponent(ev.title) + '&dates=' + ev.start + '/' + ev.end + '&location=' + encodeURIComponent(ev.location), '_blank');
  document.querySelectorAll('.cal-dropdown').forEach(function(d) { d.classList.remove('open'); });
};
window.downloadICS = function(k) {
  var ev = getCalEvent(k);
  var ics = ['BEGIN:VCALENDAR','VERSION:2.0','CALSCALE:GREGORIAN','BEGIN:VEVENT','SUMMARY:' + ev.title,'DTSTART:' + ev.start,'DTEND:' + ev.end,'LOCATION:' + ev.location.replace(/,/g,'\\,'),'DESCRIPTION:Boda de ' + WEDDING.name1 + ' & ' + WEDDING.name2,'END:VEVENT','END:VCALENDAR'].join('\r\n');
  var a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([ics], {type:'text/calendar'})); a.download = k + '-boda.ics'; document.body.appendChild(a); a.click(); document.body.removeChild(a);
  document.querySelectorAll('.cal-dropdown').forEach(function(d) { d.classList.remove('open'); });
};
window.downloadAllICS = function() {
  var l = ['BEGIN:VCALENDAR','VERSION:2.0','CALSCALE:GREGORIAN'];
  ['civil','temple','reception'].forEach(function(k) {
    var ev = WEDDING.calEvents[k];
    l.push('BEGIN:VEVENT','SUMMARY:' + ev.titleES,'DTSTART:' + ev.start,'DTEND:' + ev.end,'LOCATION:' + ev.location.replace(/,/g,'\\,'),'DESCRIPTION:Boda de ' + WEDDING.name1 + ' & ' + WEDDING.name2,'END:VEVENT');
  });
  l.push('END:VCALENDAR');
  var a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([l.join('\r\n')], {type:'text/calendar'})); a.download = 'boda-dallany-tony.ics'; document.body.appendChild(a); a.click(); document.body.removeChild(a);
};

/* ‚îÄ‚îÄ QR ‚îÄ‚îÄ */
function generateQR() {
  var c = document.getElementById('qr-canvas'); if (!c) { return; }
  try { new QRCode(c, {text: WEDDING.inviteURL, width: 180, height: 180, colorDark: '#3A2A2E', colorLight: '#FDFAF8', correctLevel: QRCode.CorrectLevel.M}); }
  catch(e) { c.innerHTML = '<p style="font-size:.7rem;color:#E8A0B4;padding:12px;">Actualiza inviteURL</p>'; }
}

/* ‚îÄ‚îÄ AUDIO ‚îÄ‚îÄ */
var audio = null, playing = false, progTimer = null;
function autoplaySong() {
  if (playing) { return; }
  if (!WEDDING.songAudio) { return; }
  if (!audio) { audio = new Audio(WEDDING.songAudio); audio.onended = stopSong; }
  audio.currentTime = 18;
  audio.play().catch(function(){});
  playing = true;
  document.getElementById('song-vinyl').style.animation = 'barSpin 3s linear infinite';
  document.getElementById('bar-vinyl').classList.add('playing');
  document.getElementById('play-icon').innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
  document.getElementById('bar-play-icon').innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
  var bar = document.getElementById('progress-bar'), bbar = document.getElementById('bar-progress-bar');
  progTimer = setInterval(function() { if (audio.duration) { var p = (audio.currentTime / audio.duration * 100) + '%'; bar.style.width = p; bbar.style.width = p; } }, 500);
}
window.toggleSong = function() {
  var vinyl = document.getElementById('song-vinyl'), icon = document.getElementById('play-icon');
  var bv = document.getElementById('bar-vinyl'), bi = document.getElementById('bar-play-icon');
  var bar = document.getElementById('progress-bar'), bbar = document.getElementById('bar-progress-bar');
  if (WEDDING.songAudio) {
    if (!audio) { audio = new Audio(WEDDING.songAudio); audio.onended = stopSong; }
    if (playing) { audio.pause(); stopSong(); }
    else { audio.currentTime = 18; audio.play(); playing = true; vinyl.style.animation = 'barSpin 3s linear infinite'; bv.classList.add('playing'); icon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; bi.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; progTimer = setInterval(function() { if (audio.duration) { var p = (audio.currentTime / audio.duration * 100) + '%'; bar.style.width = p; bbar.style.width = p; } }, 500); }
  } else {
    if (!playing) { playing = true; vinyl.style.animation = 'barSpin 3s linear infinite'; bv.classList.add('playing'); icon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; bi.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; var w = 0; progTimer = setInterval(function() { w = Math.min(w + 0.4, 100); var p = w + '%'; bar.style.width = p; bbar.style.width = p; if (w >= 100) { stopSong(); } }, 200); window.open(WEDDING.songSpotify, '_blank'); }
    else { stopSong(); }
  }
};
function stopSong() {
  playing = false;
  document.getElementById('song-vinyl').style.animation = '';
  document.getElementById('bar-vinyl').classList.remove('playing');
  document.getElementById('play-icon').innerHTML = '<path d="M8 5v14l11-7z"/>';
  document.getElementById('bar-play-icon').innerHTML = '<path d="M8 5v14l11-7z"/>';
  clearInterval(progTimer);
  document.getElementById('progress-bar').style.width = '0%';
  document.getElementById('bar-progress-bar').style.width = '0%';
}

/* ‚îÄ‚îÄ CLOSE DROPDOWNS ON OUTSIDE CLICK ‚îÄ‚îÄ */
document.addEventListener('click', function(e) {
  if (!e.target.closest('#lang-wrap')) { window.closeLangDropdown(); }
  if (!e.target.closest('.cal-wrap')) { document.querySelectorAll('.cal-dropdown').forEach(function(d) { d.classList.remove('open'); }); }
});

/* ‚îÄ‚îÄ INIT ‚îÄ‚îÄ */
document.title = WEDDING.docTitle;
buildNameSpans();
buildSlideshow();
safeSet('heart-initials', WEDDING.heartInitials);
safeSet('wedding-city', WEDDING.city);
safeSet('ec-names', WEDDING.name1 + ' & ' + WEDDING.name2);
safeSet('ec-date', WEDDING.dateDisplay.es);
safeSet('civil-date', WEDDING.civilDate); safeSet('civil-time', WEDDING.civilTime);
safeSet('civil-place', WEDDING.civilPlace.replace('\n','<br>'), 'html'); document.getElementById('civil-map').href = WEDDING.civilMap;
safeSet('temple-date', WEDDING.templeDate); safeSet('ceremony-time', WEDDING.templeTime);
safeSet('ceremony-place', WEDDING.templePlace.replace('\n','<br>'), 'html'); document.getElementById('ceremony-map').href = WEDDING.templeMap;
safeSet('reception-date', WEDDING.receptionDate); safeSet('reception-time', WEDDING.receptionTime);
safeSet('reception-place', WEDDING.receptionPlace.replace('\n','<br>'), 'html'); document.getElementById('reception-map').href = WEDDING.receptionMap;
document.getElementById('rsvp-link').href = WEDDING.rsvpLink;
safeSet('footer-names', WEDDING.name1 + ' & ' + WEDDING.name2);
safeSet('footer-year', String(new Date(WEDDING.dateISO).getFullYear()));
safeSet('song-title', WEDDING.songTitle); safeSet('song-artist', WEDDING.songArtist);
safeSet('bar-song-title', WEDDING.songTitle); safeSet('bar-song-artist', WEDDING.songArtist);
document.getElementById('song-link').href = WEDDING.songSpotify;

var pal = document.getElementById('palette');
WEDDING.palette.forEach(function(c) { var s = document.createElement('div'); s.className = 'swatch'; s.style.background = c; pal.appendChild(s); });

var gGrid = document.getElementById('gifts-grid');
WEDDING.gifts.forEach(function(g) {
  var a = document.createElement('a'); a.className = 'gift-card'; a.href = g.url; a.target = '_blank';
  var logo = g.icon === 'paypal' ? '<div style="height:42px;display:flex;align-items:center;justify-content:center;">' + PAYPAL_SVG + '</div>' : '<span style="font-size:1.8rem;">' + g.icon + '</span>';
  a.innerHTML = logo + '<span class="gift-cta">Ver mesa ‚Üí</span>'; gGrid.appendChild(a);
});

setPhoto('msg-photo', WEDDING.photoMsg, 'msg-ph');
setPhoto('events-photo', WEDDING.photoEvents, 'events-ph');
setPhoto('dress-photo', WEDDING.photoDress, 'dress-ph');
setPhoto('song-photo', WEDDING.photoSong, 'song-ph');
setPhoto('gifts-photo', WEDDING.photoGifts, 'gifts-ph');
['msg','events','dress','song','gifts'].forEach(function(k) { var ph = document.getElementById(k + '-ph'); if (ph && ph.children.length === 0 && PH[k]) { ph.innerHTML = PH[k]; } });
setLang('es');
generateQR();

function updateCountdown() {
  var d = Math.max(0, new Date(WEDDING.dateISO).getTime() - Date.now());
  safeSet('cd-days',  String(Math.floor(d / 86400000)).padStart(2, '0'));
  safeSet('cd-hours', String(Math.floor((d % 86400000) / 3600000)).padStart(2, '0'));
  safeSet('cd-min',   String(Math.floor((d % 3600000) / 60000)).padStart(2, '0'));
  safeSet('cd-sec',   String(Math.floor((d % 60000) / 1000)).padStart(2, '0'));
}
updateCountdown(); setInterval(updateCountdown, 1000);

var obs = new IntersectionObserver(function(entries) { entries.forEach(function(e) { if (e.isIntersecting) { e.target.classList.add('visible'); } }); }, {threshold: 0.08});
document.querySelectorAll('.fade').forEach(function(el) { obs.observe(el); });
</script>
</body>
</html>
